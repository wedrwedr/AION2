<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>AION2 거래소 수수료 계산기</title>
<style>
    body {
        font-family: Arial, sans-serif;
        padding: 30px;
        background: #f4f4f4;
    }
    .container {
        background: white;
        padding: 25px;
        max-width: 420px;
        margin: auto;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        text-align: center;
    }
    h2 {
        margin-bottom: 20px;
        color: #333;
    }
    label {
        display: block;
        margin: 12px 0 6px;
        font-weight: bold;
        color: #555;
    }
    input, select {
        width: 100%;
        max-width: 320px;
        padding: 10px;
        font-size: 16px;
        border: 1px solid #aaa;
        border-radius: 5px;
        box-sizing: border-box;
        margin: 0 auto;
        display: block;
    }
    .result-box {
        margin: 25px 0;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 8px;
        border: 1px solid #e0e0e0;
    }
    .result {
        font-size: 19px;
        font-weight: bold;
        color: #2c7be5;
        margin: 10px 0;
    }
    .comparison {
        font-size: 17px;
        margin: 8px 0;
    }
    .win {
        color: #28a745;
        font-weight: bold;
    }
    .lose {
        color: #dc3545;
        font-weight: bold;
    }
    .equal {
        color: #6c757d;
    }
</style>
</head>
<body>

<div class="container">
    <h2>AION2 거래소 수수료 계산기</h2>

    <!-- 일반 거래소 가격 -->
    <label>일반 거래소 판매 단가 (원)</label>
    <input type="text" id="normalPrice" placeholder="숫자만 입력" inputmode="numeric">

    <!-- 월드 거래소 가격 -->
    <label>월드 거래소 판매 단가 (원)</label>
    <input type="text" id="worldPrice" placeholder="숫자만 입력" inputmode="numeric">

    <!-- 수수료 선택 -->
    <label>수수료율 선택 (보통 월드 거래소 적용)</label>
    <select id="fee">
        <option value="0.1">10%</option>
        <option value="0.2" selected>20%</option>
    </select>

    <!-- 결과 영역 -->
    <div class="result-box">
        <div class="result">
            일반 거래소 실수령: <span id="normalResult">0</span> 원
        </div>
        <div class="result">
            월드 거래소 실수령: <span id="worldResult">0</span> 원
        </div>
        <div class="comparison" id="comparisonText">
            ← 비교 결과가 여기에 나옵니다 →
        </div>
    </div>
</div>

<script>
const normalPriceInput = document.getElementById('normalPrice');
const worldPriceInput  = document.getElementById('worldPrice');
const feeSelect        = document.getElementById('fee');
const normalResultText = document.getElementById('normalResult');
const worldResultText  = document.getElementById('worldResult');
const comparisonText   = document.getElementById('comparisonText');

function formatNumber(num) {
    return num.toLocaleString('ko-KR');
}

function calculate() {
    // 입력값 정리
    let normal = Number(normalPriceInput.value.replace(/[^0-9]/g, '')) || 0;
    let world  = Number(worldPriceInput.value.replace(/[^0-9]/g, ''))  || 0;

    normalPriceInput.value = normal;
    worldPriceInput.value  = world;

    if (normal === 0 && world === 0) {
        normalResultText.textContent = '0';
        worldResultText.textContent  = '0';
        comparisonText.textContent   = '등록 수수료를 포함한 금액입니다.';
        comparisonText.className     = 'comparison';
        return;
    }

    // 공통 등록 수수료 2%
    const REG_FEE = 0.02;

    // 일반 거래소 판매 수수료 고정 10%
    const NORMAL_SALE_FEE = 0.1;
    // 월드 거래소 판매 수수료 선택 (보통 20%)
    let worldSaleFee = parseFloat(feeSelect.value);

    // 계산: 등록 후 → 판매 수수료 적용 (floor 처리)
    let normalAfterReg  = Math.floor(normal * (1 - REG_FEE));
    let normalAfterFee  = Math.floor(normalAfterReg * (1 - NORMAL_SALE_FEE));

    let worldAfterReg   = Math.floor(world * (1 - REG_FEE));
    let worldAfterFee   = Math.floor(worldAfterReg * (1 - worldSaleFee));

    normalResultText.textContent = formatNumber(normalAfterFee);
    worldResultText.textContent  = formatNumber(worldAfterFee);

    // 비교
    let diff = worldAfterFee - normalAfterFee;

    if (diff > 0) {
        comparisonText.innerHTML = `월드 거래소가 <span class="win">+${formatNumber(diff)}원</span> 더 이득! (판매량 많을 때 유리)`;
        comparisonText.className = 'comparison win';
    } else if (diff < 0) {
        comparisonText.innerHTML = `일반 거래소가 <span class="win">+${formatNumber(-diff)}원</span> 더 이득!`;
        comparisonText.className = 'comparison win';
    } else {
        comparisonText.textContent = '두 거래소 실수령액이 같습니다';
        comparisonText.className = 'comparison equal';
    }
}

// 이벤트 연결
normalPriceInput.addEventListener('input', calculate);
worldPriceInput.addEventListener('input', calculate);
feeSelect.addEventListener('change', calculate);

// 초기 계산
calculate();
</script>

</body>
</html>
